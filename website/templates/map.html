<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <link rel="stylesheet" href="{% static "map/style.css" %}"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"/>
    <title>World map of deployments position</title>

</head>
<body>
<div id="map"></div>

<div id="links">
    <a href="/">Home</a>
    <a href="/admin/">Access administration</a>
</div>

<div id="deployment-panel">
    <div class="title">
        <h3 id="deployment-title"></h3>
        <h4 id="project-title"></h4>
        <a onclick="DeploymentPanel.close()">
            <ion-icon name="close"></ion-icon>
        </a>
    </div>
    <div class="content" id="deployment-content"></div>
</div>

</body>

{{ deployments | json_script:"deployments" }}
{{ projects | json_script:"projects" }}

<script>
    /** @type Array<Deployment> */
    const DEPLOYMENTS = JSON.parse(document.getElementById("deployments").textContent);
    /** @type Array<Project> */
    const PROJECTS = JSON.parse(document.getElementById("projects").textContent);
</script>
<script src="{% static 'map/detailPanel.js' %}"></script>
<script src="{% static 'map/script.js' %}"></script>
